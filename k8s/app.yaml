apiVersion: apps/v1
kind: Deployment
metadata:
   name: keda-demo
spec:
   replicas: 1
   selector:
      matchLabels:
         app: keda-demo
   template:
      metadata:
         labels:
            app: keda-demo
      spec:
         containers:
         - name: keda-demo
           image: localhost:32000/keda-demo:latest # microk8s local registry
           ports:
              - containerPort: 8080
---
apiVersion: v1
kind: Service
metadata:
   name: keda-demo-service
   labels:
      app: keda-demo
spec:
   selector:
      app: keda-demo
   ports:
      - name: http
        protocol: TCP
        port: 8080
        targetPort: 8080
   type: LoadBalancer
# ---
# apiVersion: networking.k8s.io/v1
# kind: Ingress
# metadata:
#    name: keda-demo-ingress
# spec:
#    rules:
#       -  host: keda-demo.local
#          http:
#             paths:
#                -  path: /
#                   pathType: Prefix
#                   backend:
#                      service:
#                         name: keda-demo-service
#                         port:
#                            number: 8080
